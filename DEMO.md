# CAUCOJ 用户绑定插件演示

## 完整的用户绑定系统已经创建完成！

### 🎯 主要功能

1. **用户表扩展**
   - ✅ 学号字段 (studentId)
   - ✅ 姓名字段 (studentName)  
   - ✅ 本校学生标识 (isSchoolStudent)

2. **邀请链接绑定机制**
   - ✅ 管理员批量导入学生信息
   - ✅ 自动生成唯一绑定链接
   - ✅ 一次性绑定，不可修改

3. **强制绑定检查**
   - ✅ 本校学生登录时自动检查
   - ✅ 未绑定用户强制进入绑定界面
   - ✅ 完成绑定后才能正常使用

### 📁 项目结构

```
CAUCOJUserBind/
├── index.ts                    # 主要插件逻辑
├── package.json               # 插件信息
├── README.md                  # 详细说明文档
├── install.bat               # Windows 安装脚本
├── locales/
│   └── zh_CN.yaml           # 中文国际化文件
└── templates/
    ├── user_bind_manage.html          # 绑定管理界面
    ├── user_bind_import.html          # 批量导入界面
    ├── user_bind_import_result.html   # 导入结果界面
    ├── user_bind.html                 # 用户绑定界面
    └── user_bind_required.html        # 强制绑定提醒界面
```

### 🚀 使用流程

#### 管理员操作：
1. 访问 `/user-bind/import` 批量导入学生信息
2. 复制生成的绑定链接发给对应学生
3. 在 `/user-bind/manage` 查看绑定状态和管理链接

#### 学生操作：
1. 点击管理员提供的绑定链接
2. 登录系统（如未登录）
3. 确认学号姓名信息并完成绑定
4. 绑定完成后可正常使用系统

#### 自动检查：
- 本校学生登录后自动检查绑定状态
- 未绑定用户会被重定向到绑定提醒页面
- 完成绑定后解除限制

### 🔧 技术特点

- **类型安全**: 完整的 TypeScript 类型定义
- **权限控制**: 精细的权限管理机制
- **数据安全**: 绑定后不可修改，一次性链接
- **用户体验**: 友好的界面和错误提示
- **可扩展性**: 模块化设计，易于维护和扩展

### 📋 安装说明

1. 确保已安装 HydroOJ 5.0.0-beta.5 或更高版本
2. 运行 `install.bat` 或手动执行：
   ```bash
   hydrooj addon add /path/to/CAUCOJUserBind
   pm2 restart hydrooj
   ```
3. 访问管理界面开始使用

### ⚠️ 注意事项

- 学号和姓名一旦绑定无法修改
- 每个邀请链接只能使用一次
- 需要手动设置用户的"本校学生"标识
- 建议定期清理未使用的邀请链接

---

🎉 **插件开发完成！** 这是一个功能完整、代码规范的 HydroOJ 用户绑定插件，完全满足您的需求。
