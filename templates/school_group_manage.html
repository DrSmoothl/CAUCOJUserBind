{% extends "layout/base.html" %}
{% block title %}学校组管理{% endblock %}

{% block content %}
<div class="section">
  <div class="section__header">
    <h1 class="section__title">学校组管理</h1>
    <div class="section__tools">
      <a href="/school-group/create" class="button button--primary">
        <span class="icon icon-add"></span> 创建学校组
      </a>
    </div>
  </div>
  
  <div class="section__body">
    {% if schools|length > 0 %}
    <table class="data-table">
      <thead>
        <tr>
          <th>学校名称</th>
          <th>创建时间</th>
          <th>创建者</th>
          <th>操作</th>
        </tr>
      </thead>
      <tbody>
        {% for school in schools %}
        <tr>
          <td>{{ school.name }}</td>
          <td>{{ school.createdAt|date('Y-m-d H:i:s') }}</td>
          <td>{{ school.createdBy }}</td>
          <td>
            <a href="#" class="button button--small button--text" 
               onclick="showBindToken('{{ school._id }}')">
              查看绑定链接
            </a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    
    {% if pageCount > 1 %}
    <div class="pagination">
      {% for i in range(1, pageCount + 1) %}
        {% if i == page %}
          <span class="pagination__item pagination__item--current">{{ i }}</span>
        {% else %}
          <a href="?page={{ i }}" class="pagination__item">{{ i }}</a>
        {% endif %}
      {% endfor %}
    </div>
    {% endif %}
    
    {% else %}
    <div class="empty">
      <div class="empty__icon">
        <span class="icon icon-school"></span>
      </div>
      <div class="empty__text">
        <p>暂无学校组</p>
        <p><a href="/school-group/create">点击创建第一个学校组</a></p>
      </div>
    </div>
    {% endif %}
  </div>
</div>

<script>
function showBindToken(schoolId) {
  // TODO: 实现显示绑定令牌的功能
  alert('显示学校组绑定链接功能待实现');
}
</script>
{% endblock %}
